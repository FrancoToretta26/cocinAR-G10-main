{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { t, color } from 'react-native-tailwindcss';\nimport Input from \"../Components/Input\";\nimport Button from \"../Components/Button\";\nimport { useNavigation } from 'react-navigation';\nimport { useForm, Controller } from 'react-hook-form';\nimport { getRecipes } from \"../controller/recipe.controller\";\nimport { recuperarPass, resetPassword } from \"../controller/user.controller\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function CambiarPassword(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isBillingDifferent = _useState2[0],\n      setIsBillingDifferent = _useState2[1];\n\n  var _useForm = useForm(),\n      handleSubmit = _useForm.handleSubmit,\n      control = _useForm.control,\n      errors = _useForm.formState.errors;\n\n  var EMAIL_REGEX = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n  var toggleBilling = function toggleBilling() {\n    setIsBillingDifferent(function (prev) {\n      return !prev;\n    });\n  };\n\n  var onSubmit = function _callee(data) {\n    var cambiarPass;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(data.npassword == data.password)) {\n              _context.next = 8;\n              break;\n            }\n\n            console.log('entre al if');\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(resetPassword(data.password));\n\n          case 4:\n            cambiarPass = _context.sent;\n\n            if (cambiarPass.rdo == 0) {\n              navigation.navigate('ValidarCodigoPass');\n              alert('Se ha actualizado la contraseña');\n            } else {\n              alert('Ha ocurrido un error');\n            }\n\n            _context.next = 9;\n            break;\n\n          case 8:\n            alert('Las contraseñas no coinciden');\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Controller, {\n      defaultValue: \"\",\n      name: \"password\",\n      rules: {\n        required: {\n          value: true,\n          message: 'La password es requerida'\n        }\n      },\n      control: control,\n      render: function render(_ref2) {\n        var _errors$password;\n\n        var _ref2$field = _ref2.field,\n            onChange = _ref2$field.onChange,\n            value = _ref2$field.value;\n        return _jsx(Input, {\n          error: errors.password,\n          errorText: (_errors$password = errors.password) == null ? void 0 : _errors$password.message,\n          onChangeText: function onChangeText(value) {\n            return onChange(value);\n          },\n          value: value,\n          placeholder: \"Contrase\\xF1a\"\n        });\n      }\n    }), _jsx(Controller, {\n      defaultValue: \"\",\n      name: \"npassword\",\n      rules: {\n        required: {\n          value: true,\n          message: 'La password es requerida'\n        }\n      },\n      control: control,\n      render: function render(_ref3) {\n        var _errors$npassword;\n\n        var _ref3$field = _ref3.field,\n            onChange = _ref3$field.onChange,\n            value = _ref3$field.value;\n        return _jsx(Input, {\n          error: errors.npassword,\n          errorText: (_errors$npassword = errors.npassword) == null ? void 0 : _errors$npassword.message,\n          onChangeText: function onChangeText(value) {\n            return onChange(value);\n          },\n          value: value,\n          placeholder: \"Confirmar Contrase\\xF1a\"\n        });\n      }\n    }), _jsx(Button, {\n      onPress: handleSubmit(onSubmit),\n      label: \"Continuar\"\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: [t.flex1, t.justifyCenter, t.itemsCenter, t.p6, {\n    backgroundColor: \"#222121\"\n  }]\n});","map":{"version":3,"names":["React","useState","t","color","Input","Button","useNavigation","useForm","Controller","getRecipes","recuperarPass","resetPassword","CambiarPassword","navigation","route","isBillingDifferent","setIsBillingDifferent","handleSubmit","control","errors","formState","EMAIL_REGEX","toggleBilling","prev","onSubmit","data","npassword","password","console","log","cambiarPass","rdo","navigate","alert","styles","container","required","value","message","field","onChange","StyleSheet","create","flex1","justifyCenter","itemsCenter","p6","backgroundColor"],"sources":["/Users/juancruzlafranconi/Documents/AppMobile/cocinAR-G10-main/cocinAR-G10-main/Screens/CambiarPassword.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { StyleSheet, Switch, Text, View } from 'react-native';\nimport { t, color } from 'react-native-tailwindcss';\n\nimport Input from '../Components/Input'\nimport Button from '../Components/Button';\n\nimport {useNavigation} from 'react-navigation'\n\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { getRecipes } from '../controller/recipe.controller';\nimport { recuperarPass, resetPassword } from '../controller/user.controller';\n\n\nexport default function CambiarPassword({ navigation, route }) {\n  const [isBillingDifferent, setIsBillingDifferent] = useState(false);\n  const { handleSubmit, control, formState: { errors } } = useForm();\n\n  const EMAIL_REGEX = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n\n  const toggleBilling = () => {\n    setIsBillingDifferent((prev) => !prev);\n  };\n\n  const onSubmit = async function (data){\n    if(data.npassword==data.password){\n      console.log('entre al if')\n    let cambiarPass = await resetPassword(data.password)\n    if(cambiarPass.rdo==0){\n      navigation.navigate('ValidarCodigoPass')\n      alert('Se ha actualizado la contraseña')\n    }\n    else{\n      alert('Ha ocurrido un error')\n    }\n  }\n  else{\n    alert('Las contraseñas no coinciden')\n  }\n    }\n  \n\n\n  return (\n    <View style={styles.container}>\n        <Controller\n        defaultValue=\"\"\n        name=\"password\"\n        rules={{required:{\n            value: true,\n            message: 'La password es requerida'\n        },}}\n        control={control}\n        render={({ field: { onChange, value } }) => (\n            <Input\n                error={errors.password}\n                errorText={errors.password?.message}\n                onChangeText={(value) => onChange(value)}\n                value={value}\n                placeholder=\"Contraseña\"\n            />\n        )}\n        />\n\n<Controller\n        defaultValue=\"\"\n        name=\"npassword\"\n        rules={{required:{\n            value: true,\n            message: 'La password es requerida'\n        },}}\n        control={control}\n        render={({ field: { onChange, value } }) => (\n            <Input\n                error={errors.npassword}\n                errorText={errors.npassword?.message}\n                onChangeText={(value) => onChange(value)}\n                value={value}\n                placeholder=\"Confirmar Contraseña\"\n            />\n        )}\n        />\n      <Button onPress={handleSubmit(onSubmit)} label=\"Continuar\" />\n\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: [t.flex1, t.justifyCenter, t.itemsCenter, t.p6, {backgroundColor: \"#222121\"}],\n\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}